<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.79.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192><title>SPR and CWL | sysPipe</title><meta property="og:title" content="SPR and CWL"><meta property="og:description" content="document.addEventListener(&#34;DOMContentLoaded&#34;, function() { document.querySelector(&#34;h1&#34;).className = &#34;title&#34;; });  document.addEventListener(&#34;DOMContentLoaded&#34;, function() { var links = document.links; for (var i = 0, linksLength = links.length; i How to connect CWL description files within systemPipeR This section will demonstrate how to connect CWL parameters files to create workflows. In addition, we will show how the workflow can be easily scalable with systemPipeR.
SYSargsList container stores all the information and instructions needed for processing a set of input files with a single or many command-line steps within a workflow (i."><meta property="og:type" content="article"><meta property="og:url" content="/sp/spr/cwl_and_spr/"><meta property="article:modified_time" content="2021-11-29T13:05:39-08:00"><meta property="og:site_name" content="sysPipe"><meta itemprop=name content="SPR and CWL"><meta itemprop=description content="document.addEventListener(&#34;DOMContentLoaded&#34;, function() { document.querySelector(&#34;h1&#34;).className = &#34;title&#34;; });  document.addEventListener(&#34;DOMContentLoaded&#34;, function() { var links = document.links; for (var i = 0, linksLength = links.length; i How to connect CWL description files within systemPipeR This section will demonstrate how to connect CWL parameters files to create workflows. In addition, we will show how the workflow can be easily scalable with systemPipeR.
SYSargsList container stores all the information and instructions needed for processing a set of input files with a single or many command-line steps within a workflow (i."><meta itemprop=dateModified content="2021-11-29T13:05:39-08:00"><meta itemprop=wordCount content="2133"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="SPR and CWL"><meta name=twitter:description content="document.addEventListener(&#34;DOMContentLoaded&#34;, function() { document.querySelector(&#34;h1&#34;).className = &#34;title&#34;; });  document.addEventListener(&#34;DOMContentLoaded&#34;, function() { var links = document.links; for (var i = 0, linksLength = links.length; i How to connect CWL description files within systemPipeR This section will demonstrate how to connect CWL parameters files to create workflows. In addition, we will show how the workflow can be easily scalable with systemPipeR.
SYSargsList container stores all the information and instructions needed for processing a set of input files with a single or many command-line steps within a workflow (i."><link rel=preload href=../../../scss/main.min.9156453689c2a62860578c0dd5be0d8047f7ff28c3529bf4b8b3279efe82e52a.css as=style><link href=../../../scss/main.min.9156453689c2a62860578c0dd5be0d8047f7ff28c3529bf4b8b3279efe82e52a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><link rel=stylesheet href=../../../css/prism.css><script src=../../../js/driver0.9.8.min.js></script><link rel=stylesheet href=../../../css/driver0.9.8.min.css><link rel=stylesheet href=../../../css/site.css><script src=../../../js/site.js></script></head><body class="td-page line-numbers"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=../../../><span class=font-weight-bold>sysPipe</span></a>
<row class=header-switch><div class="custom-control custom-switch"><input type=checkbox class=custom-control-input id=sidebarSwitch checked>
<label class=custom-control-label for=sidebarSwitch>sidebar</label></div><div class="custom-control custom-switch"><input type=checkbox class=custom-control-input id=tocSwitch checked>
<label class=custom-control-label for=tocSwitch>toc</label></div></row><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../about/ id=navbarDropdown role=button>About</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../about/overview/ style=padding-left:1rem;font-weight:calc(3/3*500)>Overview</a>
<a class=dropdown-item href=../../../about/team/ style=padding-left:1rem;font-weight:calc(3/3*500)>Our Team</a>
<a class=dropdown-item href=../../../about/publications/ style=padding-left:1rem;font-weight:calc(3/3*500)>Publications</a>
<a class=dropdown-item href=../../../about/acknowledgement/ style=padding-left:1rem;font-weight:calc(3/3*500)>Acknowledgement</a>
<a class=dropdown-item href=../../../about/contact/ style=padding-left:1rem;font-weight:calc(3/3*500)>Contact</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../sp/ id=navbarDropdown role=button>systemPipeR</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../sp/spr/ style=padding-left:1rem;font-weight:calc(3/3*500)>systemPipeR Package</a>
<a class=dropdown-item href=../../../sp/spr/introduction/ style=padding-left:2rem;font-weight:calc(3/4*500)>Introduction</a>
<a class=dropdown-item href=../../../sp/spr/gettingstarted/ style=padding-left:2rem;font-weight:calc(3/4*500)>Getting Started</a>
<a class=dropdown-item href=../../../sp/spr/spr_run/ style=padding-left:2rem;font-weight:calc(3/4*500)>How to run a Workflow</a>
<a class=dropdown-item href=../../../sp/spr/steps/ style=padding-left:2rem;font-weight:calc(3/4*500)>Workflow steps overview</a>
<a class=dropdown-item href=../../../sp/spr/templates/ style=padding-left:2rem;font-weight:calc(3/4*500)>Workflow Templates</a>
<a class=dropdown-item href=../../../sp/spr/cwl_syntax/ style=padding-left:2rem;font-weight:calc(3/4*500)>CWL syntax</a>
<a class=dropdown-item href=../../../sp/spr/cwl_and_spr/ style=padding-left:2rem;font-weight:calc(3/4*500)>SPR and CWL</a>
<a class=dropdown-item href=../../../sp/spr/sprinstall/ style=padding-left:2rem;font-weight:calc(3/4*500)>SPR detailed installation</a>
<a class=dropdown-item href=../../../sp/spt/ style=padding-left:1rem;font-weight:calc(3/3*500)>systemPipeRTools</a>
<a class=dropdown-item href=../../../sp/spt/ style=padding-left:2rem;font-weight:calc(3/4*500)>Data Visualization</a>
<a class=dropdown-item href=../../../sp/spr/spr_funcs/ style=padding-left:2rem;font-weight:calc(3/4*500)>Reference Manual</a>
<a class=dropdown-item href=../../../sp/sprdata/ style=padding-left:1rem;font-weight:calc(3/3*500)>systemPipeRdata</a>
<a class=dropdown-item href=../../../sp/sprdata/systempiperdata/ style=padding-left:2rem;font-weight:calc(3/4*500)>Vignette</a>
<a class=dropdown-item href=../../../sp/sprdata/newwf/ style=padding-left:2rem;font-weight:calc(3/4*500)>Rules</a>
<a class=dropdown-item href=../../../spr/ style=padding-left:1rem;font-weight:calc(3/3*500)>Links</a>
<a class=dropdown-item href=http://bioconductor.org/packages/devel/bioc/html/systemPipeR.html style=padding-left:2rem;font-weight:calc(3/4*500)>SPR Bioconductor</a>
<a class=dropdown-item href=https://github.com/tgirke/systemPipeR style=padding-left:2rem;font-weight:calc(3/4*500)>SPR GitHub</a>
<a class=dropdown-item href=http://bioconductor.org/packages/devel/data/experiment/html/systemPipeRdata.html style=padding-left:2rem;font-weight:calc(3/4*500)>SPRdata Bioconductor</a>
<a class=dropdown-item href=https://github.com/tgirke/systemPipeRdata style=padding-left:2rem;font-weight:calc(3/4*500)>SPRdata GitHub</a>
<a class=dropdown-item href=https://github.com/tgirke/systemPipeTools style=padding-left:2rem;font-weight:calc(3/4*500)>SPT GitHub</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../sps/ id=navbarDropdown role=button>Shiny</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../sps/ style=padding-left:1rem;font-weight:calc(3/3*500)>SPS Documentation</a>
<a class=dropdown-item href=https://github.com/systemPipeR/systemPipeShiny style=padding-left:1rem;font-weight:calc(3/3*500)>Github</a>
<a class=dropdown-item href=http://bioconductor.org/packages/3.13/bioc/html/systemPipeShiny.html style=padding-left:1rem;font-weight:calc(3/3*500)>Bioconductor</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../spr_wf id=navbarDropdown role=button>Workflows</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../spr_wf style=padding-left:1rem;font-weight:calc(3/3*500)>Collection</a>
<a class=dropdown-item href=../../../spr_wf/installwf/ style=padding-left:1rem;font-weight:calc(3/3*500)>How to install Workflow</a>
<a class=dropdown-item href=../../../spr_wf/newwf style=padding-left:1rem;font-weight:calc(3/3*500)>Rules to create Workflow</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../outreach/ id=navbarDropdown role=button>Outreach</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../training/conferences/ style=padding-left:1rem;font-weight:calc(3/3*500)>Conferences</a>
<a class=dropdown-item href=../../../training/presentations/ style=padding-left:1rem;font-weight:calc(3/3*500)>Presentations</a>
<a class=dropdown-item href=../../../training/videos/ style=padding-left:1rem;font-weight:calc(3/3*500)>Videos Tutorials</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../news/ id=navbarDropdown role=button>News</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../news/release_3_13/ style=padding-left:1rem;font-weight:calc(3/3*500)>Bioconductor 3.13</a>
<a class=dropdown-item href=../../../news/release_3_12/ style=padding-left:1rem;font-weight:calc(3/3*500)>Bioconductor 3.12</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.a27377dce846ec069f6d13ce96c94d0d.json data-offline-search-base-href=../../../ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.a27377dce846ec069f6d13ce96c94d0d.json data-offline-search-base-href=../../../ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../sp/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=sp><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../sp/spr/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">systemPipeR</a></li><ul><li class="collapse show" id=spspr><a class="td-sidebar-link td-sidebar-link__page" id=m-spsprintroduction href=../../../sp/spr/introduction/>Introduction</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprgettingstarted href=../../../sp/spr/gettingstarted/>Getting Started</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprspr_run href=../../../sp/spr/spr_run/>How to run a Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprsteps href=../../../sp/spr/steps/>Workflow steps overview</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprtemplates href=../../../sp/spr/templates/>Workflow Templates</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprcwl_syntax href=../../../sp/spr/cwl_syntax/>CWL syntax</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-spsprcwl_and_spr href=../../../sp/spr/cwl_and_spr/>SPR and CWL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprsprinstall href=../../../sp/spr/sprinstall/>SPR detailed installation instructions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprspr_funcs href=../../../sp/spr/spr_funcs/>Help Manual</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprsp_docker href=../../../sp/spr/sp_docker/>SPR Docker container</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spspreditor href=../../../sp/spr/editor/>Workflow Plot Editor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprviz_editorbower_componentssvg-pan-zoomissue_template href=../../../sp/spr/viz_editor/bower_components/svg-pan-zoom/issue_template/></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../sp/spt/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">systemPipeTools</a></li><ul><li class=collapse id=spspt><a class="td-sidebar-link td-sidebar-link__page" id=m-spsptsystempipetools href=../../../sp/spt/systempipetools/>Data Visualizations</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../sp/sprdata/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">systemPipeRdata</a></li><ul><li class=collapse id=spsprdata><a class="td-sidebar-link td-sidebar-link__page" id=m-spsprdatasystempiperdata href=../../../sp/sprdata/systempiperdata/>Workflow templates and sample data</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-spsprdatanewwf href=../../../sp/sprdata/newwf/>Rules to create a new Workflow Template</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-spsp_docker href=../../../sp/sp_docker/>SPR Docker container</a></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://raw.githubusercontent.com/systemPipeR/systemPipeR.github.io/main/content/en/sp/spr/cwl_and_spr.Rmd target=_blank class=source-link><i class="fa fa-code fa-fw"></i>View Rmd source</a>
<a href=https://github.com/systemPipeR/systemPipeR.github.io/blob/main/content/en/sp/spr/cwl_and_spr.md target=_blank><i class="fab fa-github fa-fw"></i>View on Github</a>
<a href=https://github.com/systemPipeR/systemPipeR.github.io/edit/main/content/en/sp/spr/cwl_and_spr.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/systemPipeR/systemPipeR.github.io/new/main/content/en/sp/spr/cwl_and_spr.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i>Create child page</a>
<a href=https://github.com/systemPipeR/systemPipeR.github.io/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><ul><li><a href=#how-to-connect-cwl-description-files-within-systempiper>How to connect CWL description files within <em><code>systemPipeR</code></em></a><ul><li><a href=#how-to-connect-the-parameter-files-and-targets-file-information>How to connect the parameter files and <code>targets</code> file information?</a></li></ul></li><li><a href=#creating-the-cwl-param-files-from-the-command-line>Creating the CWL param files from the command-line</a><ul><li><a href=#define-prefix-and-defaults>Define prefix and defaults</a></li><li><a href=#createparam-function><code>createParam</code> Function</a></li><li><a href=#how-to-access-and-edit-param-files>How to access and edit param files</a><ul><li><a href=#print-a-component>Print a component</a></li><li><a href=#subsetting-the-command-line>Subsetting the command-line</a></li><li><a href=#replacing-a-existing-argument-in-the-command-line>Replacing a existing argument in the command-line</a></li><li><a href=#adding-new-arguments>Adding new arguments</a></li><li><a href=#editing-output-param>Editing <code>output</code> param</a></li></ul></li></ul></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=../../../sp/>Documentation</a></li><li class=breadcrumb-item><a href=../../../sp/spr/>systemPipeR</a></li><li class="breadcrumb-item active" aria-current=page><a href=../../../sp/spr/cwl_and_spr/>SPR and CWL</a></li></ol></nav><div class=td-content><h1>SPR and CWL</h1><script type=text/javascript>document.addEventListener("DOMContentLoaded",function(){document.querySelector("h1").className="title";});</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",function(){var links=document.links;for(var i=0,linksLength=links.length;i<linksLength;i++)
if(links[i].hostname!=window.location.hostname)
links[i].target='_blank';});</script><h2 id=how-to-connect-cwl-description-files-within-systempiper>How to connect CWL description files within <em><code>systemPipeR</code></em></h2><p>This section will demonstrate how to connect CWL parameters files to create
workflows. In addition, we will show how the workflow can be easily scalable
with <em><code>systemPipeR</code></em>.</p><p><code>SYSargsList</code> container stores all the information and instructions needed for processing
a set of input files with a single or many command-line steps within a workflow
(i.e. several components of the software or several independent software tools).
The <code>SYSargsList</code> object is created and fully populated with the <code>SYSargsList</code> construct
function.
Full documentation of <code>SYSargsList</code> management instances can be found <a href=#sysargslist>here</a>
and <a href=#appendstep>here</a>.</p><p>The following imports a <code>.cwl</code> file (here <code>example.cwl</code>) for running the <code>echo Hello World!</code>
example.</p><pre><code class=language-r>HW &lt;- SYSargsList(wf_file = &quot;example/workflow_example.cwl&quot;, input_file = &quot;example/example_single.yml&quot;,
    dir_path = system.file(&quot;extdata/cwl&quot;, package = &quot;systemPipeR&quot;))
HW
</code></pre><pre><code>## Instance of 'SYSargsList': 
##     WF Steps:
##        1. Step_x --&gt; Status: Pending 
##            Total Files: 1 | Existing: 0 | Missing: 1 
##          1.1. echo
##              cmdlist: 1 | Pending: 1
## 
</code></pre><pre><code class=language-r>cmdlist(HW)
</code></pre><pre><code>## $Step_x
## $Step_x$defaultid
## $Step_x$defaultid$echo
## [1] &quot;echo Hello World! &gt; results/M1.txt&quot;
</code></pre><p>However, we are limited to run just one command-line or one sample in this example.
To scale the command-line over many samples, a simple solution offered by <code>systemPipeR</code>
is to provide a <code>variable</code> for each of the parameters that we want to run with multiple samples.</p><p>Let’s explore the example:</p><pre><code class=language-r>dir_path &lt;- system.file(&quot;extdata/cwl&quot;, package = &quot;systemPipeR&quot;)
yml &lt;- yaml::read_yaml(file.path(dir_path, &quot;example/example.yml&quot;))
yml
</code></pre><pre><code>## $message
## [1] &quot;_STRING_&quot;
## 
## $SampleName
## [1] &quot;_SAMPLE_&quot;
## 
## $results_path
## $results_path$class
## [1] &quot;Directory&quot;
## 
## $results_path$path
## [1] &quot;./results&quot;
</code></pre><p>For the <code>message</code> and <code>SampleName</code> parameter, we are passing a variable connecting
with a third file called <code>targets.</code></p><p>Now, let’s explore the <code>targets</code> file structure:</p><pre><code class=language-r>targetspath &lt;- system.file(&quot;extdata/cwl/example/targets_example.txt&quot;, package = &quot;systemPipeR&quot;)
read.delim(targetspath, comment.char = &quot;#&quot;)
</code></pre><pre><code>##               Message SampleName
## 1        Hello World!         M1
## 2          Hello USA!         M2
## 3 Hello Bioconductor!         M3
</code></pre><p>The <code>targets</code> file defines all input files or values and sample ids of an analysis workflow.
For this example, we have defined a string message for the <code>echo</code> command-line tool,
in the first column that will be evaluated, and the second column is the
<code>SampleName</code> id for each one of the messages.
Any number of additional columns can be added as needed.</p><p>Users should note here, the usage of <code>targets</code> files is optional when using
<code>systemPipeR's</code> new CWL interface. Since for organizing experimental variables targets
files are extremely useful and user-friendly. Thus, we encourage users to keep using them.</p><h3 id=how-to-connect-the-parameter-files-and-targets-file-information>How to connect the parameter files and <code>targets</code> file information?</h3><p>The constructor function creates an <code>SYSargsList</code> S4 class object connecting three input files:</p><ul><li>CWL command-line specification file (<code>wf_file</code> argument);</li><li>Input variables (<code>input_file</code> argument);</li><li>Targets file (<code>targets</code> argument).</li></ul><p>As demonstrated above, the latter is optional for workflow steps lacking input files.
The connection between input variables (here defined by <code>input_file</code> argument)
and the <code>targets</code> file are defined under the <code>inputvars</code> argument.
A named vector is required, where each element name needs to match with column
names in the <code>targets</code> file, and the value must match the names of the <em>.yml</em>
variables. This is used to replace the CWL variable and construct all the command-line
for that particular step.</p><p>The variable pattern <code>_XXXX_</code> is used to distinguish CWL variables that target
columns will replace. This pattern is recommended for consistency and easy identification
but not enforced.</p><p>The following imports a <code>.cwl</code> file (same example demonstrated above) for running
the <code>echo Hello World</code> example. However, now we are connecting the variable defined
on the <code>.yml</code> file with the <code>targets</code> file inputs.</p><pre><code class=language-r>HW_mul &lt;- SYSargsList(step_name = &quot;echo&quot;, targets = targetspath, wf_file = &quot;example/workflow_example.cwl&quot;,
    input_file = &quot;example/example.yml&quot;, dir_path = dir_path, inputvars = c(Message = &quot;_STRING_&quot;,
        SampleName = &quot;_SAMPLE_&quot;))
HW_mul
</code></pre><pre><code>## Instance of 'SYSargsList': 
##     WF Steps:
##        1. echo --&gt; Status: Pending 
##            Total Files: 3 | Existing: 0 | Missing: 3 
##          1.1. echo
##              cmdlist: 3 | Pending: 3
## 
</code></pre><pre><code class=language-r>cmdlist(HW_mul)
</code></pre><pre><code>## $echo
## $echo$M1
## $echo$M1$echo
## [1] &quot;echo Hello World! &gt; results/M1.txt&quot;
## 
## 
## $echo$M2
## $echo$M2$echo
## [1] &quot;echo Hello USA! &gt; results/M2.txt&quot;
## 
## 
## $echo$M3
## $echo$M3$echo
## [1] &quot;echo Hello Bioconductor! &gt; results/M3.txt&quot;
</code></pre><div class=figure style=text-align:center><p><img src=../../../home/dcassol/src/R-4.1.0/library/systemPipeR/extdata/images/SPR_CWL_hello.png alt="WConnectivity between CWL param files and targets files." width=100%></p><p class=caption>Figure 1: WConnectivity between CWL param files and targets files.</p></div><h2 id=creating-the-cwl-param-files-from-the-command-line>Creating the CWL param files from the command-line</h2><p>Users need to define the command-line in a pseudo-bash script format:</p><pre><code class=language-r>command &lt;- &quot;
    hisat2 \
    -S &lt;F, out: ./results/M1A.sam&gt; \
    -x &lt;F: ./data/tair10.fasta&gt; \
     -k &lt;int: 1&gt; \
    -min-intronlen &lt;int: 30&gt; \
    -max-intronlen &lt;int: 3000&gt; \
    -threads &lt;int: 4&gt; \
    -U &lt;F: ./data/SRR446027_1.fastq.gz&gt;
&quot;
</code></pre><h3 id=define-prefix-and-defaults>Define prefix and defaults</h3><ul><li><p>First line is the base command. Each line is an argument with its default value.</p></li><li><p>For argument lines (starting from the second line), any word before the first
space with leading <code>-</code> or <code>--</code> in each will be treated as a prefix, like <code>-S</code> or
<code>--min</code>. Any line without this first word will be treated as no prefix.</p></li><li><p>All defaults are placed inside <code>&lt;...></code>.</p></li><li><p>First argument is the input argument type. <code>F</code> for “File,” “int,” “string” are unchanged.</p></li><li><p>Optional: use the keyword <code>out</code> followed the type with a <code>,</code> comma separation to
indicate if this argument is also an CWL output.</p></li><li><p>Then, use <code>:</code> to separate keywords and default values, any non-space value after the <code>:</code>
will be treated as the default value.</p></li><li><p>If any argument has no default value, just a flag, like <code>--verbose</code>, there is no need to add any <code>&lt;...></code></p></li></ul><h3 id=createparam-function><code>createParam</code> Function</h3><p><code>createParam</code> function requires the <code>string</code> as defined above as an input.</p><p>First of all, the function will print the three components of the <code>cwl</code> file:</p><ul><li><code>BaseCommand</code>: Specifies the program to execute.</li><li><code>Inputs</code>: Defines the input parameters of the process.</li><li><code>Outputs</code>: Defines the parameters representing the output of the process.</li></ul><p>The four component is the original command-line.</p><p>If in interactive mode, the function will verify that everything is correct and
will ask you to proceed. Here, the user can answer “no” and provide more
information at the string level. Another question is to save the param created here.</p><p>If running the workflow in non-interactive mode, the <code>createParam</code> function will
consider “yes” and returning the container.</p><pre><code class=language-r>cmd &lt;- createParam(command, writeParamFiles = FALSE)
</code></pre><pre><code>## *****BaseCommand*****
## hisat2 
## *****Inputs*****
## S:
##     type: File
##     preF: -S
##     yml: ./results/M1A.sam
## x:
##     type: File
##     preF: -x
##     yml: ./data/tair10.fasta
## k:
##     type: int
##     preF: -k
##     yml: 1
## min-intronlen:
##     type: int
##     preF: -min-intronlen
##     yml: 30
## max-intronlen:
##     type: int
##     preF: -max-intronlen
##     yml: 3000
## threads:
##     type: int
##     preF: -threads
##     yml: 4
## U:
##     type: File
##     preF: -U
##     yml: ./data/SRR446027_1.fastq.gz
## *****Outputs*****
## output1:
##     type: File
##     value: ./results/M1A.sam
## *****Parsed raw command line*****
## hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz
</code></pre><p>If the user chooses not to save the <code>param</code> files on the above operation,
it can use the <code>writeParamFiles</code> function.</p><pre><code class=language-r>writeParamFiles(cmd, overwrite = TRUE)
</code></pre><h3 id=how-to-access-and-edit-param-files>How to access and edit param files</h3><h4 id=print-a-component>Print a component</h4><pre><code class=language-r>printParam(cmd, position = &quot;baseCommand&quot;)  ## Print a baseCommand section
</code></pre><pre><code>## *****BaseCommand*****
## hisat2
</code></pre><pre><code class=language-r>printParam(cmd, position = &quot;outputs&quot;)
</code></pre><pre><code>## *****Outputs*****
## output1:
##     type: File
##     value: ./results/M1A.sam
</code></pre><pre><code class=language-r>printParam(cmd, position = &quot;inputs&quot;, index = 1:2)  ## Print by index
</code></pre><pre><code>## *****Inputs*****
## S:
##     type: File
##     preF: -S
##     yml: ./results/M1A.sam
## x:
##     type: File
##     preF: -x
##     yml: ./data/tair10.fasta
</code></pre><pre><code class=language-r>printParam(cmd, position = &quot;inputs&quot;, index = -1:-2)  ## Negative indexing printing to exclude certain indices in a position
</code></pre><pre><code>## *****Inputs*****
## k:
##     type: int
##     preF: -k
##     yml: 1
## min-intronlen:
##     type: int
##     preF: -min-intronlen
##     yml: 30
## max-intronlen:
##     type: int
##     preF: -max-intronlen
##     yml: 3000
## threads:
##     type: int
##     preF: -threads
##     yml: 4
## U:
##     type: File
##     preF: -U
##     yml: ./data/SRR446027_1.fastq.gz
</code></pre><h4 id=subsetting-the-command-line>Subsetting the command-line</h4><pre><code class=language-r>cmd2 &lt;- subsetParam(cmd, position = &quot;inputs&quot;, index = 1:2, trim = TRUE)
</code></pre><pre><code>## *****Inputs*****
## S:
##     type: File
##     preF: -S
##     yml: ./results/M1A.sam
## x:
##     type: File
##     preF: -x
##     yml: ./data/tair10.fasta
## *****Parsed raw command line*****
## hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta
</code></pre><pre><code class=language-r>cmdlist(cmd2)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta&quot;
</code></pre><pre><code class=language-r>cmd2 &lt;- subsetParam(cmd, position = &quot;inputs&quot;, index = c(&quot;S&quot;, &quot;x&quot;), trim = TRUE)
</code></pre><pre><code>## *****Inputs*****
## S:
##     type: File
##     preF: -S
##     yml: ./results/M1A.sam
## x:
##     type: File
##     preF: -x
##     yml: ./data/tair10.fasta
## *****Parsed raw command line*****
## hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta
</code></pre><pre><code class=language-r>cmdlist(cmd2)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta&quot;
</code></pre><h4 id=replacing-a-existing-argument-in-the-command-line>Replacing a existing argument in the command-line</h4><pre><code class=language-r>cmd3 &lt;- replaceParam(cmd, &quot;base&quot;, index = 1, replace = list(baseCommand = &quot;bwa&quot;))
</code></pre><pre><code>## Replacing baseCommand
## *****BaseCommand*****
## bwa 
## *****Parsed raw command line*****
## bwa -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz
</code></pre><pre><code class=language-r>cmdlist(cmd3)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;bwa -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz&quot;
</code></pre><pre><code class=language-r>new_inputs &lt;- new_inputs &lt;- list(new_input1 = list(type = &quot;File&quot;, preF = &quot;-b&quot;, yml = &quot;myfile&quot;),
    new_input2 = &quot;-L &lt;int: 4&gt;&quot;)
cmd4 &lt;- replaceParam(cmd, &quot;inputs&quot;, index = 1:2, replace = new_inputs)
</code></pre><pre><code>## Replacing inputs
## *****Inputs*****
## new_input1:
##     type: File
##     preF: -b
##     yml: myfile
## new_input2:
##     type: int
##     preF: -L
##     yml: 4
## k:
##     type: int
##     preF: -k
##     yml: 1
## min-intronlen:
##     type: int
##     preF: -min-intronlen
##     yml: 30
## max-intronlen:
##     type: int
##     preF: -max-intronlen
##     yml: 3000
## threads:
##     type: int
##     preF: -threads
##     yml: 4
## U:
##     type: File
##     preF: -U
##     yml: ./data/SRR446027_1.fastq.gz
## *****Parsed raw command line*****
## hisat2 -b myfile -L 4 -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz
</code></pre><pre><code class=language-r>cmdlist(cmd4)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;hisat2 -b myfile -L 4 -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz&quot;
</code></pre><h4 id=adding-new-arguments>Adding new arguments</h4><pre><code class=language-r>newIn &lt;- new_inputs &lt;- list(new_input1 = list(type = &quot;File&quot;, preF = &quot;-b1&quot;, yml = &quot;myfile1&quot;),
    new_input2 = list(type = &quot;File&quot;, preF = &quot;-b2&quot;, yml = &quot;myfile2&quot;), new_input3 = &quot;-b3 &lt;F: myfile3&gt;&quot;)
cmd5 &lt;- appendParam(cmd, &quot;inputs&quot;, index = 1:2, append = new_inputs)
</code></pre><pre><code>## Replacing inputs
## *****Inputs*****
## S:
##     type: File
##     preF: -S
##     yml: ./results/M1A.sam
## x:
##     type: File
##     preF: -x
##     yml: ./data/tair10.fasta
## k:
##     type: int
##     preF: -k
##     yml: 1
## min-intronlen:
##     type: int
##     preF: -min-intronlen
##     yml: 30
## max-intronlen:
##     type: int
##     preF: -max-intronlen
##     yml: 3000
## threads:
##     type: int
##     preF: -threads
##     yml: 4
## U:
##     type: File
##     preF: -U
##     yml: ./data/SRR446027_1.fastq.gz
## new_input1:
##     type: File
##     preF: -b1
##     yml: myfile1
## new_input2:
##     type: File
##     preF: -b2
##     yml: myfile2
## new_input3:
##     type: File
##     preF: -b3
##     yml: myfile3
## *****Parsed raw command line*****
## hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz -b1 myfile1 -b2 myfile2 -b3 myfile3
</code></pre><pre><code class=language-r>cmdlist(cmd5)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz -b1 myfile1 -b2 myfile2 -b3 myfile3&quot;
</code></pre><pre><code class=language-r>cmd6 &lt;- appendParam(cmd, &quot;inputs&quot;, index = 1:2, after = 0, append = new_inputs)
</code></pre><pre><code>## Replacing inputs
## *****Inputs*****
## new_input1:
##     type: File
##     preF: -b1
##     yml: myfile1
## new_input2:
##     type: File
##     preF: -b2
##     yml: myfile2
## new_input3:
##     type: File
##     preF: -b3
##     yml: myfile3
## S:
##     type: File
##     preF: -S
##     yml: ./results/M1A.sam
## x:
##     type: File
##     preF: -x
##     yml: ./data/tair10.fasta
## k:
##     type: int
##     preF: -k
##     yml: 1
## min-intronlen:
##     type: int
##     preF: -min-intronlen
##     yml: 30
## max-intronlen:
##     type: int
##     preF: -max-intronlen
##     yml: 3000
## threads:
##     type: int
##     preF: -threads
##     yml: 4
## U:
##     type: File
##     preF: -U
##     yml: ./data/SRR446027_1.fastq.gz
## *****Parsed raw command line*****
## hisat2 -b1 myfile1 -b2 myfile2 -b3 myfile3 -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz
</code></pre><pre><code class=language-r>cmdlist(cmd6)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;hisat2 -b1 myfile1 -b2 myfile2 -b3 myfile3 -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz&quot;
</code></pre><h4 id=editing-output-param>Editing <code>output</code> param</h4><pre><code class=language-r>new_outs &lt;- list(sam_out = &quot;&lt;F: $(inputs.results_path)/test.sam&gt;&quot;)
cmd7 &lt;- replaceParam(cmd, &quot;outputs&quot;, index = 1, replace = new_outs)
</code></pre><pre><code>## Replacing outputs
## *****Outputs*****
## sam_out:
##     type: File
##     value: $(inputs.results_path)/test.sam
## *****Parsed raw command line*****
## hisat2 -S ./results/M1A.sam -x ./data/tair10.fasta -k 1 -min-intronlen 30 -max-intronlen 3000 -threads 4 -U ./data/SRR446027_1.fastq.gz
</code></pre><pre><code class=language-r>output(cmd7)
</code></pre><pre><code>## $defaultid
## $defaultid$hisat2
## [1] &quot;./results/test.sam&quot;
</code></pre><div class="text-muted mt-5 pt-3 border-top">Last modified 2021-11-29: <a href=https://github.com/systemPipeR/systemPipeR.github.io/commit/1bf92516aa806e81f0e7f0380db60cf4345beb0a>Merge pull request #46 from systemPipeR/dependabot/npm_and_yarn/postcss-8.4.4 (1bf9251)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/systemPipeR/><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Bioconductor aria-label=Bioconductor><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.bioconductor.org/packages/release/bioc/html/systemPipeR.html><i class="fa fa-dna"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Find an issue?" aria-label="Find an issue?"><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/systemPipeR/systemPipeR/issues><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 The systemPipe Project All Rights Reserved</small><p class=mt-2><a href=../../../about/>About systemPipe Project</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script>(function(){var i,text,code,codes=document.getElementsByTagName('code');for(i=0;i<codes.length;){code=codes[i];if(code.parentNode.tagName!=='PRE'&&code.childElementCount===0){text=code.textContent;if(/^\$[^$]/.test(text)&&/[^$]\$$/.test(text)){text=text.replace(/^\$/,'\\(').replace(/\$$/,'\\)');code.textContent=text;}
if(/^\\\((.|\s)+\\\)$/.test(text)||/^\\\[(.|\s)+\\\]$/.test(text)||/^\$(.|\s)+\$$/.test(text)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)){code.outerHTML=code.innerHTML;continue;}}
i++;}})();</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true }
    }
});
</script><script src=../../../js/main.min.f820bfc507c3ebefe17f8881ec4ee10013f3b89ad9555a50acf9bb1771e6823f.js integrity="sha256-+CC/xQfD6+/hf4iB7E7hABPzuJrZVVpQrPm7F3Hmgj8=" crossorigin=anonymous></script><script src=../../../js/prism.js></script></body></html>