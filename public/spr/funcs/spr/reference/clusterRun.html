<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Submit command-line tools to cluster — clusterRun • systemPipeR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Submit command-line tools to cluster — clusterRun" />
<meta property="og:description" content="Submits non-R command-line software to queueing/scheduling systems of compute clusters using run specifications defined by functions similar to runCommandline. clusterRun can be used with most queueing systems since it is based on utilities from the batchtools package which supports the use of template files (*.tmpl) for defining the run parameters of the different schedulers. The path to the *.tmpl file needs to be specified in a conf file provided under the conffile argument." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CCMXLYXWYV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CCMXLYXWYV');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">systemPipeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.27.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="https://systempipe.org/spr/">
    <span class="fa fa fa fa-home"></span>
     
    SPR Home
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Submit command-line tools to cluster</h1>
    
    <div class="hidden name"><code>clusterRun.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Submits non-R command-line software to queueing/scheduling systems of compute clusters using run specifications defined by functions similar to <code>runCommandline</code>. <code>clusterRun</code> can be used with most queueing systems since it is based on utilities from the <code>batchtools</code> package which supports the use of template files (<code>*.tmpl</code>) for defining the run parameters of the different schedulers. The path to the <code>*.tmpl</code> file needs to be specified in a conf file provided under the <code>conffile</code> argument.</p>
    </div>

    <pre class="usage"><span class='fu'>clusterRun</span><span class='op'>(</span><span class='va'>args</span>, FUN <span class='op'>=</span> <span class='va'>runCommandline</span>, more.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>args <span class='op'>=</span> <span class='va'>args</span>, make_bam <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, conffile <span class='op'>=</span> <span class='st'>".batchtools.conf.R"</span>, template <span class='op'>=</span> <span class='st'>"batchtools.slurm.tmpl"</span>, <span class='va'>Njobs</span>, runid <span class='op'>=</span> <span class='st'>"01"</span>, <span class='va'>resourceList</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>args</th>
      <td><p>Object of class <code>SYSargs</code> or <code>SYSargs2</code>.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>Accepts functions such as <code><a href='runCommandline.html'>runCommandline(args, ...)</a></code> where the <code>args</code> argument is mandatory and needs to be of class <code>SYSargs</code> or <code>SYSargs2</code>.</p></td>
    </tr>
    <tr>
      <th>more.args</th>
      <td><p>Object of class <code>list</code>, which provides the arguments that control the <code>FUN</code> function.</p></td>
    </tr>
    <tr>
      <th>conffile</th>
      <td><p>Path to conf file (default location <code>./.batchtools.conf.R</code>). This file contains in its simplest form just one command, such as this line for the Slurm scheduler: <code>cluster.functions &lt;- makeClusterFunctionsSlurm(template="batchtools.slurm.tmpl")</code>. For more detailed information visit this page: https://mllg.github.io/batchtools/index.html</p></td>
    </tr>
    <tr>
      <th>template</th>
      <td><p>The template files for a specific queueing/scheduling systems can be downloaded from here: 
https://github.com/mllg/batchtools/tree/master/inst/templates. Slurm, PBS/Torque, and Sun Grid Engine (SGE) templates are provided.</p></td>
    </tr>
    <tr>
      <th>Njobs</th>
      <td><p>Interger defining the number of cluster jobs. For instance, if <code>args</code> contains 18 command-line jobs and <code>Njobs=9</code>, then the function will distribute them accross 9 cluster jobs each running 2 command-line jobs. To increase the number of CPU cores used by each process, one can do this under the corresonding argument of the command-line tool, e.g. <code>-p</code> argument for Tophat.</p></td>
    </tr>
    <tr>
      <th>runid</th>
      <td><p>Run identifier used for log file to track system call commands. Default is <code>"01"</code>.</p></td>
    </tr>
    <tr>
      <th>resourceList</th>
      <td><p><code>List</code> for reserving for each cluster job sufficient computing resources including memory (Megabyte), number of nodes, CPU cores, walltime (minutes), etc. For more details, one can consult the template file for each queueing/scheduling system.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Object of class <code>Registry</code>, as well as files and directories created by the executed command-line tools.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>For more details on <code>batchtools</code>, please consult the following page: https://github.com/mllg/batchtools/</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Daniela Cassol and Thomas Girke</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>clusterRun</code> replaces the older functions <code>getQsubargs</code> and <code>qsubRun</code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#########################################</span>
<span class='co'>## Examples with \code{SYSargs} object ##</span>
<span class='co'>#########################################</span>
<span class='co'>## Construct SYSargs object from param and targets files </span>
<span class='va'>param</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"hisat2.param"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>
<span class='va'>targets</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"targets.txt"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>
<span class='va'>args</span> <span class='op'>&lt;-</span> <span class='fu'><a href='systemArgs.html'>systemArgs</a></span><span class='op'>(</span>sysma<span class='op'>=</span><span class='va'>param</span>, mytargets<span class='op'>=</span><span class='va'>targets</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: path[1]="./data/SRR446027_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[2]="./data/SRR446028_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[3]="./data/SRR446029_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[4]="./data/SRR446030_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[5]="./data/SRR446031_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[6]="./data/SRR446032_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[7]="./data/SRR446033_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[8]="./data/SRR446034_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[9]="./data/SRR446035_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[10]="./data/SRR446036_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[11]="./data/SRR446037_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[12]="./data/SRR446038_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[13]="./data/SRR446039_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[14]="./data/SRR446040_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[15]="./data/SRR446041_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[16]="./data/SRR446042_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[17]="./data/SRR446043_1.fastq.gz": No such file or directory</span></div><div class='output co'>#&gt; <span class='warning'>Warning: path[18]="./data/SRR446044_1.fastq.gz": No such file or directory</span></div><div class='input'><span class='va'>args</span>
</div><div class='output co'>#&gt; An instance of 'SYSargs' for running 'hisat2' on 18 samples </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span>; <span class='fu'><a href='sysargs.html'>modules</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span>; <span class='fu'><a href='sysargs.html'>cores</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span>; <span class='fu'><a href='sysargs.html'>outpaths</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span>; <span class='fu'><a href='sysargs.html'>sysargs</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] "targetsin"     "targetsout"    "targetsheader" "modules"      
#&gt;  [5] "software"      "cores"         "other"         "reference"    
#&gt;  [9] "results"       "infile1"       "infile2"       "outfile1"     
#&gt; [13] "sysargs"       "outpaths"     </div><div class='output co'>#&gt; [1] "hisat2/2.1.0"</div><div class='output co'>#&gt; [1] 4</div><div class='output co'>#&gt;                                                                                               M1A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446027_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               M1B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446028_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               A1A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446029_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               A1B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446030_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               V1A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446031_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               V1B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446032_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               M6A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446033_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               M6B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446034_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               A6A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446035_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               A6B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446036_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               V6A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446037_1.fastq.gz.hisat.bam" 
#&gt;                                                                                               V6B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446038_1.fastq.gz.hisat.bam" 
#&gt;                                                                                              M12A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446039_1.fastq.gz.hisat.bam" 
#&gt;                                                                                              M12B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446040_1.fastq.gz.hisat.bam" 
#&gt;                                                                                              A12A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446041_1.fastq.gz.hisat.bam" 
#&gt;                                                                                              A12B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446042_1.fastq.gz.hisat.bam" 
#&gt;                                                                                              V12A 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446043_1.fastq.gz.hisat.bam" 
#&gt;                                                                                              V12B 
#&gt; "/home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446044_1.fastq.gz.hisat.bam" </div><div class='output co'>#&gt;                                                                                                                                                                                                                                                                      M1A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446027_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446027_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      M1B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446028_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446028_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      A1A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446029_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446029_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      A1B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446030_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446030_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      V1A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446031_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446031_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      V1B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446032_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446032_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      M6A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446033_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446033_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      M6B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446034_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446034_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      A6A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446035_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446035_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      A6B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446036_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446036_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      V6A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446037_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446037_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                      V6B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446038_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446038_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                     M12A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446039_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446039_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                     M12B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446040_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446040_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                     A12A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446041_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446041_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                     A12B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446042_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446042_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                     V12A 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446043_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446043_1.fastq.gz " 
#&gt;                                                                                                                                                                                                                                                                     V12B 
#&gt; "hisat2 -p 4 -k 1 --min-intronlen 30 --max-intronlen 3000 -S /home/runner/work/systemPipeR/systemPipeR/docs/reference/results/SRR446044_1.fastq.gz.hisat.sam /home/runner/work/systemPipeR/systemPipeR/docs/reference/data/tair10.fasta -U ./data/SRR446044_1.fastq.gz " </div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## Execute SYSargs on multiple machines of a compute cluster. The following</span>
<span class='co'>## example uses the conf and template files for the Slurm scheduler. Please </span>
<span class='co'>## read the instructions on how to obtain the corresponding files for other schedulers. </span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.copy</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>".batchtools.conf.R"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>, <span class='st'>"."</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.copy</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"batchtools.slurm.tmpl"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>, <span class='st'>"."</span><span class='op'>)</span>
<span class='va'>resources</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>walltime<span class='op'>=</span><span class='fl'>120</span>, ntasks<span class='op'>=</span><span class='fl'>1</span>, ncpus<span class='op'>=</span><span class='fu'><a href='sysargs.html'>cores</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span>, memory<span class='op'>=</span><span class='fl'>1024</span><span class='op'>)</span> 
<span class='va'>reg</span> <span class='op'>&lt;-</span> <span class='fu'>clusterRun</span><span class='op'>(</span><span class='va'>args</span>, FUN <span class='op'>=</span> <span class='va'>runCommandline</span>, more.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>args <span class='op'>=</span> <span class='va'>args</span>, make_bam <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, conffile<span class='op'>=</span><span class='st'>".batchtools.conf.R"</span>, template<span class='op'>=</span><span class='st'>"batchtools.slurm.tmpl"</span>, Njobs<span class='op'>=</span><span class='fl'>18</span>, runid<span class='op'>=</span><span class='st'>"01"</span>, resourceList<span class='op'>=</span><span class='va'>resources</span><span class='op'>)</span>

<span class='co'>## Monitor progress of submitted jobs</span>
<span class='fu'>getStatus</span><span class='op'>(</span>reg<span class='op'>=</span><span class='va'>reg</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.exists</a></span><span class='op'>(</span><span class='fu'><a href='sysargs.html'>outpaths</a></span><span class='op'>(</span><span class='va'>args</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'>##########################################</span>
<span class='co'>## Examples with \code{SYSargs2} object ##</span>
<span class='co'>##########################################</span>
<span class='co'>## Construct SYSargs2 object from CWl param, CWL input, and targets files </span>
<span class='va'>targets</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"targets.txt"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>
<span class='va'>dir_path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/cwl/hisat2/hisat2-se"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>
<span class='va'>WF</span> <span class='op'>&lt;-</span> <span class='fu'><a href='loadWorkflow.html'>loadWorkflow</a></span><span class='op'>(</span>targets<span class='op'>=</span><span class='va'>targets</span>, wf_file<span class='op'>=</span><span class='st'>"hisat2-mapping-se.cwl"</span>, 
                  input_file<span class='op'>=</span><span class='st'>"hisat2-mapping-se.yml"</span>, dir_path<span class='op'>=</span><span class='va'>dir_path</span><span class='op'>)</span>
<span class='va'>WF</span> <span class='op'>&lt;-</span> <span class='fu'><a href='renderWF.html'>renderWF</a></span><span class='op'>(</span><span class='va'>WF</span>, inputvars<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>FileName<span class='op'>=</span><span class='st'>"_FASTQ_PATH1_"</span>, SampleName<span class='op'>=</span><span class='st'>"_SampleName_"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>WF</span>
</div><div class='output co'>#&gt; Instance of 'SYSargs2':
#&gt;    Slot names/accessors: 
#&gt;       targets: 18 (M1A...V12B), targetsheader: 4 (lines)
#&gt;       modules: 1
#&gt;       wf: 0, clt: 1, yamlinput: 7 (components)
#&gt;       input: 18, output: 18
#&gt;       cmdlist: 18
#&gt;    WF Steps:
#&gt;       1. hisat2-mapping-se (rendered: TRUE)
#&gt; 
#&gt; </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>WF</span><span class='op'>)</span>; <span class='fu'><a href='sysargs.html'>modules</a></span><span class='op'>(</span><span class='va'>WF</span><span class='op'>)</span>; <span class='fu'><a href='SYSargs2-class.html'>targets</a></span><span class='op'>(</span><span class='va'>WF</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>; <span class='fu'><a href='SYSargs2-class.html'>cmdlist</a></span><span class='op'>(</span><span class='va'>WF</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span>; <span class='fu'><a href='SYSargs2-class.html'>output</a></span><span class='op'>(</span><span class='va'>WF</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] "targets"       "targetsheader" "modules"       "wf"           
#&gt;  [5] "clt"           "yamlinput"     "cmdlist"       "input"        
#&gt;  [9] "output"        "cwlfiles"      "inputvars"     "cmdToCwl"     </div><div class='output co'>#&gt;        module1 
#&gt; "hisat2/2.1.0" </div><div class='output co'>#&gt; $M1A
#&gt; $M1A$FileName
#&gt; [1] "./data/SRR446027_1.fastq.gz"
#&gt; 
#&gt; $M1A$SampleName
#&gt; [1] "M1A"
#&gt; 
#&gt; $M1A$Factor
#&gt; [1] "M1"
#&gt; 
#&gt; $M1A$SampleLong
#&gt; [1] "Mock.1h.A"
#&gt; 
#&gt; $M1A$Experiment
#&gt; [1] 1
#&gt; 
#&gt; $M1A$Date
#&gt; [1] "23-Mar-2012"
#&gt; 
#&gt; </div><div class='output co'>#&gt; $M1A
#&gt; $M1A$`hisat2-mapping-se`
#&gt; [1] "hisat2 -S ./results/M1A.sam  -x ./data/tair10.fasta  -k 1  --min-intronlen 30  --max-intronlen 3000  -U ./data/SRR446027_1.fastq.gz --threads 4"
#&gt; 
#&gt; 
#&gt; $M1B
#&gt; $M1B$`hisat2-mapping-se`
#&gt; [1] "hisat2 -S ./results/M1B.sam  -x ./data/tair10.fasta  -k 1  --min-intronlen 30  --max-intronlen 3000  -U ./data/SRR446028_1.fastq.gz --threads 4"
#&gt; 
#&gt; </div><div class='output co'>#&gt; $M1A
#&gt; $M1A$`hisat2-mapping-se`
#&gt; [1] "./results/M1A.sam"
#&gt; 
#&gt; 
#&gt; $M1B
#&gt; $M1B$`hisat2-mapping-se`
#&gt; [1] "./results/M1B.sam"
#&gt; 
#&gt; 
#&gt; $A1A
#&gt; $A1A$`hisat2-mapping-se`
#&gt; [1] "./results/A1A.sam"
#&gt; 
#&gt; 
#&gt; $A1B
#&gt; $A1B$`hisat2-mapping-se`
#&gt; [1] "./results/A1B.sam"
#&gt; 
#&gt; 
#&gt; $V1A
#&gt; $V1A$`hisat2-mapping-se`
#&gt; [1] "./results/V1A.sam"
#&gt; 
#&gt; 
#&gt; $V1B
#&gt; $V1B$`hisat2-mapping-se`
#&gt; [1] "./results/V1B.sam"
#&gt; 
#&gt; 
#&gt; $M6A
#&gt; $M6A$`hisat2-mapping-se`
#&gt; [1] "./results/M6A.sam"
#&gt; 
#&gt; 
#&gt; $M6B
#&gt; $M6B$`hisat2-mapping-se`
#&gt; [1] "./results/M6B.sam"
#&gt; 
#&gt; 
#&gt; $A6A
#&gt; $A6A$`hisat2-mapping-se`
#&gt; [1] "./results/A6A.sam"
#&gt; 
#&gt; 
#&gt; $A6B
#&gt; $A6B$`hisat2-mapping-se`
#&gt; [1] "./results/A6B.sam"
#&gt; 
#&gt; 
#&gt; $V6A
#&gt; $V6A$`hisat2-mapping-se`
#&gt; [1] "./results/V6A.sam"
#&gt; 
#&gt; 
#&gt; $V6B
#&gt; $V6B$`hisat2-mapping-se`
#&gt; [1] "./results/V6B.sam"
#&gt; 
#&gt; 
#&gt; $M12A
#&gt; $M12A$`hisat2-mapping-se`
#&gt; [1] "./results/M12A.sam"
#&gt; 
#&gt; 
#&gt; $M12B
#&gt; $M12B$`hisat2-mapping-se`
#&gt; [1] "./results/M12B.sam"
#&gt; 
#&gt; 
#&gt; $A12A
#&gt; $A12A$`hisat2-mapping-se`
#&gt; [1] "./results/A12A.sam"
#&gt; 
#&gt; 
#&gt; $A12B
#&gt; $A12B$`hisat2-mapping-se`
#&gt; [1] "./results/A12B.sam"
#&gt; 
#&gt; 
#&gt; $V12A
#&gt; $V12A$`hisat2-mapping-se`
#&gt; [1] "./results/V12A.sam"
#&gt; 
#&gt; 
#&gt; $V12B
#&gt; $V12B$`hisat2-mapping-se`
#&gt; [1] "./results/V12B.sam"
#&gt; 
#&gt; </div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## Execute SYSargs2 on multiple machines of a compute cluster. The following</span>
<span class='co'>## example uses the conf and template files for the Slurm scheduler. Please </span>
<span class='co'>## read the instructions on how to obtain the corresponding files for other schedulers.  </span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.copy</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>".batchtools.conf.R"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>, <span class='st'>"."</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.copy</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"batchtools.slurm.tmpl"</span>, package<span class='op'>=</span><span class='st'>"systemPipeR"</span><span class='op'>)</span>, <span class='st'>"."</span><span class='op'>)</span>
<span class='va'>resources</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>walltime<span class='op'>=</span><span class='fl'>120</span>, ntasks<span class='op'>=</span><span class='fl'>1</span>, ncpus<span class='op'>=</span><span class='fl'>4</span>, memory<span class='op'>=</span><span class='fl'>1024</span><span class='op'>)</span> 
<span class='va'>reg</span> <span class='op'>&lt;-</span> <span class='fu'>clusterRun</span><span class='op'>(</span><span class='va'>WF</span>, FUN <span class='op'>=</span> <span class='va'>runCommandline</span>, more.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>args <span class='op'>=</span> <span class='va'>WF</span>, make_bam <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, conffile<span class='op'>=</span><span class='st'>".batchtools.conf.R"</span>, template<span class='op'>=</span><span class='st'>"batchtools.slurm.tmpl"</span>, Njobs<span class='op'>=</span><span class='fl'>18</span>, runid<span class='op'>=</span><span class='st'>"01"</span>, resourceList<span class='op'>=</span><span class='va'>resources</span><span class='op'>)</span>

<span class='co'>## Monitor progress of submitted jobs</span>
<span class='fu'>getStatus</span><span class='op'>(</span>reg<span class='op'>=</span><span class='va'>reg</span><span class='op'>)</span>

<span class='co'>## Updates the path in the object \code{output(WF)}</span>
<span class='va'>WF</span> <span class='op'>&lt;-</span> <span class='fu'><a href='output_update.html'>output_update</a></span><span class='op'>(</span><span class='va'>WF</span>, dir<span class='op'>=</span><span class='cn'>FALSE</span>, replace<span class='op'>=</span><span class='cn'>TRUE</span>, extension<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>".sam"</span>, <span class='st'>".bam"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## Alignment stats</span>
<span class='va'>read_statsDF</span> <span class='op'>&lt;-</span> <span class='fu'><a href='alignStats.html'>alignStats</a></span><span class='op'>(</span><span class='va'>WF</span><span class='op'>)</span> 
<span class='va'>read_statsDF</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>read_statsDF</span><span class='op'>[</span><span class='va'>targets</span><span class='op'>$</span><span class='va'>FileName</span>,<span class='op'>]</span>, <span class='va'>targets</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.table</a></span><span class='op'>(</span><span class='va'>read_statsDF</span>, <span class='st'>"results/alignStats.xls"</span>, row.names<span class='op'>=</span><span class='cn'>FALSE</span>, quote<span class='op'>=</span><span class='cn'>FALSE</span>, sep<span class='op'>=</span><span class='st'>"\t"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://girke.bioinformatics.ucr.edu/'>Thomas Girke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


